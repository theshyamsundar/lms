{% extends "base.html" %}
{% block content %}

<style>
/* ========== EXEC KPI SYSTEM ========== */

.exec-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 32px;
}

.exec-header h2 {
  font-weight: 700;
  letter-spacing: -0.5px;
}

.exec-header .subtitle {
  color: #6b7280;
  font-size: 15px;
}

.kpi-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
  margin-bottom: 48px;
}

.kpi-card {
  border-radius: 22px;
  padding: 28px 32px;
  color: white;
  min-height: 140px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.kpi-label {
  font-size: 13px;
  letter-spacing: 1.2px;
  opacity: 0.85;
  text-transform: uppercase;
}

.kpi-value {
  font-size: 44px;
  font-weight: 700;
  line-height: 1.05;
}

.kpi-sub {
  font-size: 14px;
  opacity: 0.85;
}

/* Color themes */
.green { background: linear-gradient(135deg,#2e7d32,#4caf50); }
.blue { background: linear-gradient(135deg,#1e40af,#3b82f6); }
.purple { background: linear-gradient(135deg,#5b21b6,#7c3aed); }
.orange { background: linear-gradient(135deg,#b45309,#f97316); }

/* Table */
.exec-table th {
  text-transform: uppercase;
  font-size: 12px;
  letter-spacing: 1px;
  color: #6b7280;
}

.exec-table td {
  font-size: 15px;
}

.negative {
  color: #dc2626;
  font-weight: 600;
}
</style>

<!-- ================= HEADER ================= -->
<div class="exec-header">
  <h2>Executive Dashboard</h2>
  <div class="subtitle">Enterprise learning ROI & business impact</div>
</div>

<!-- ================= KPI CARDS ================= -->
<div class="kpi-grid">

  <div class="kpi-card green">
    <div class="kpi-label">Enterprise ROI</div>
    <div class="kpi-value">
      {% if enterprise_roi.roi_pct is not none %}
        {{ enterprise_roi.roi_pct }}%
      {% else %}
        —
      {% endif %}
    </div>
    <div class="kpi-sub">Return on learning spend</div>
  </div>

  <div class="kpi-card blue">
    <div class="kpi-label">Net Value Created</div>
    <div class="kpi-value">₹{{ enterprise_roi.net_benefit | round(0) }}</div>
    <div class="kpi-sub">After total costs</div>
  </div>

  <div class="kpi-card purple">
    <div class="kpi-label">Benefit–Cost Ratio</div>
    <div class="kpi-value">
      {% if enterprise_roi.bcr is not none %}
        {{ enterprise_roi.bcr }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="kpi-sub">Value per ₹ invested</div>
  </div>

  <div class="kpi-card orange">
    <div class="kpi-label">Payback (Months)</div>
    <div class="kpi-value">
      {% if enterprise_roi.payback_months is not none %}
        {{ enterprise_roi.payback_months }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="kpi-sub">Time to recover investment</div>
  </div>

</div>

<!-- ================= PROGRAM PORTFOLIO ================= -->
<div class="card shadow-sm border-0">
  <div class="card-header bg-white fw-semibold">
    Program ROI Portfolio
  </div>

  <table class="table exec-table align-middle mb-0">
    <thead class="table-light">
      <tr>
        <th>Program</th>
        <th>Benefit</th>
        <th>Cost</th>
        <th>ROI %</th>
        <th>BCR</th>
        <th>Payback</th>
      </tr>
    </thead>
    <tbody>
      {% for p in programs %}
      <tr>
        <td class="fw-semibold">{{ p.title }}</td>
        <td>₹{{ p.benefit | round(0) }}</td>
        <td>₹{{ p.cost | round(0) }}</td>
        <td class="{% if p.roi_pct is not none and p.roi_pct < 0 %}negative{% endif %}">
          {{ p.roi_pct if p.roi_pct is not none else "—" }}
        </td>
        <td>{{ p.bcr if p.bcr is not none else "—" }}</td>
        <td>
          {{ p.payback_months ~ " mo" if p.payback_months is not none else "—" }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}